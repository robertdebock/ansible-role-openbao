---
# vars file for openbao

# GPG key and repository locations for OpenBao.
openbao_gpg_key_url: "https://openbao.org/assets/openbao-gpg-pub-20240618.asc"
openbao_gpg_key_path: "{{ openbao_download_dir.rstrip('/') + '/openbao_public_key.asc' }}"

openbao_apt_repository: "deb [signed-by=/usr/share/keyrings/openbao-archive-keyring.gpg] https://pkgs.openbao.org/deb stable main"
openbao_yum_repository_baseurl: "https://pkgs.openbao.org/rpm/$basearch"
openbao_yum_repository_gpgkey: "https://openbao.org/assets/openbao-gpg-pub-20240618.asc"

# Determine package name including version, based on package manager.
# For apt, the syntax is "name=version". For rpm-based managers, the
# common convention is "name-version".
_openbao_package_name:
  default: "openbao-{{ openbao_version }}"
  apt: "openbao={{ openbao_version }}"

openbao_package_name: "{{ _openbao_package_name[ansible_facts['pkg_mgr']] | default(_openbao_package_name['default']) }}"

# Determine directory mode based on path
# /tmp requires 1777 (sticky bit) to work properly with apt and other tools
_openbao_download_dir_mode:
  default: "0755"
  "/tmp": "1777"

openbao_download_dir_mode: "{{ _openbao_download_dir_mode[openbao_download_dir] | default(_openbao_download_dir_mode['default']) }}"
